# 0 - 指令整理

## Service
```shell
# 新增 Service
kubectl create -f services/auth.yaml

# 取得 frontend Service 資訊
kubectl get services frontend

# 測試 frontend Service
curl -ks https://<EXTERNAL-IP>

# 測試 frontend Service ( format template )
curl -ks https://kubectl get svc frontend -o=jsonpath="{.status.loadBalancer.ingress[0].ip}"
```

## Deployment
```shell
# 檢查 Deployment object 屬性
kubectl explain deployment

# 檢查所有 Deployment object 屬性
kubectl explain deployment --recursive

# 顯示 Deployment object 特定屬性說明
kubectl explain deployment.metadata.name

# 直接打開編輯器視窗修改 deployment 的設定值
kubectl edit deployment hello
```

#### Scale Deployment
```shell
# 調整 Deployment 中的 replicas 屬性值
# 語法：kubectl scale deployment [deployment_name] --[field]=[value]
kubectl scale deployment hello --replicas=5

# 驗證現在有的 pods 數量
kubectl get pods | grep hello- | wc -l
```

#### Rolling Update
```shell
# 暫停滾動更新
kubectl rollout pause deployment/hello

# 繼續滾動更新
kubectl rollout resume deployment/hello

# 回滾
kubectl rollout undo deployment/hello

# 查詢升級狀況
kubectl rollout status deployment/hello

# 驗證現在有的 pods 狀態
kubectl get pods -o jsonpath --template='{range .items[*]}{.metadata.name}{"\t"}{"\t"}{.spec.containers[0].image}{"\n"}{end}'
```

## Replicas
```shell
# 查看當前 Deployment 的 ReplicaSet
kubectl get replicasets
```